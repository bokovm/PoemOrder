<!doctype html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/public :: layout(~{::content})}">

<main th:fragment="content">

    <!-- HERO -->
    <section class="hero">
        <div class="hero-inner">
            <div>
                <h1 th:text="${settings.heroTitle ?: 'Стихи на заказ'}"></h1>

                <p class="lead"
                   th:text="${settings.heroSubtitle ?: 'Пишу авторские стихи: поздравления, признания, свадьбы, юбилеи. По твоей истории и под нужный стиль.'}">
                </p>

                <p style="margin-top:14px;">
                    <a class="btn" th:href="@{/order}">Заказать стих</a>
                </p>
            </div>

            <aside class="how">
                <h3>Как это работает</h3>
                <ol class="steps">
                    <li>Рассказываешь историю и пожелания</li>
                    <li>Я превращаю это в стих и уточняю детали</li>
                    <li>Ты получаешь готовый текст</li>
                </ol>
                <a th:href="@{/portfolio}">Посмотреть примеры →</a>
            </aside>
        </div>

        <svg class="tear" viewBox="0 0 1440 120" preserveAspectRatio="none">
            <path d="M0,40 C120,80 240,0 360,40 C480,80 600,0 720,40 C840,80 960,0 1080,40 C1200,80 1320,0 1440,40 L1440,120 L0,120 Z"></path>
        </svg>
    </section>

    <!-- PRICING TEASER -->
    <section class="stack" style="margin-top:18px;">
        <h2>Цены и условия</h2>

        <div class="card">
            <p class="muted">
                <strong>Оплата:</strong>
                <span th:text="${#strings.abbreviate(settings.pricingPayment, 140)}"></span>
            </p>
            <p class="muted">
                <strong>Доставка:</strong>
                <span th:text="${#strings.abbreviate(settings.pricingDelivery, 140)}"></span>
            </p>
            <p class="muted">
                <strong>Возврат:</strong>
                <span th:text="${#strings.abbreviate(settings.pricingRefund, 140)}"></span>
            </p>

            <p style="margin-top:12px;">
                <a th:href="@{/pricing}">Подробнее →</a>
            </p>
        </div>
    </section>

    <hr class="hr"/>

    <!-- PORTFOLIO PREVIEW -->
    <section class="stack">
        <h2>Портфолио</h2>

        <div class="grid">
            <article class="card" th:each="w : ${featuredWorks}">
                <p class="muted">
                    <strong th:text="${w.title}"></strong>
                    <span class="muted"> · Стих</span>
                </p>

                <p th:text="${w.excerpt ?: #strings.abbreviate(w.body, 220)}"></p>
            </article>
        </div>

        <p><a th:href="@{/portfolio}">Все работы</a></p>
    </section>

    <hr class="hr"/>

    <!-- REVIEWS PREVIEW -->
    <section class="stack">
        <h2>Отзывы</h2>

        <div class="grid">
            <article class="card" th:each="r : ${featuredReviews}">
                <p class="muted">
                    <strong th:text="${r.name}"></strong>
                </p>
                <p th:text="${r.text}"></p>
            </article>
        </div>

        <p><a th:href="@{/reviews}">Все отзывы</a></p>
    </section>

    <hr class="hr"/>

    <!-- CONTACTS PREVIEW (новая система) -->
    <section class="stack">
        <h2>Контакты</h2>
        <p class="muted">Остались вопросы? Пиши удобным способом.</p>

        <div class="grid">
            <div class="card" th:each="c : ${contactLinks}">
                <p style="margin:0 0 6px;">
                    <strong th:text="${c.label}">Название</strong>
                </p>

                <p class="small" style="margin:0;">
                    <a th:if="${c.href != null and !#strings.isEmpty(c.href)}"
                       th:href="${c.href}"
                       th:text="${c.value}"
                       target="_blank" rel="noopener"></a>

                    <span th:unless="${c.href != null and !#strings.isEmpty(c.href)}"
                          th:text="${c.value}"></span>
                </p>
            </div>
        </div>

        <p style="margin-top:6px;">
            <a th:href="@{/contacts}">Страница контактов</a>
        </p>
    </section>

</main>
</html>
