<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru"
      th:replace="layouts/admin :: layout(~{::content})">

<div th:fragment="content" class="stack">

    <h1>Стихи</h1>

    <div class="alert alert-success" th:if="${param.ok}">
        Сохранено.
    </div>
    <div class="alert" th:if="${param.deleted}">
        Удалено.
    </div>

    <p style="margin-top:14px;">
        <a class="btn" th:href="@{/admin/poems/new}">Добавить стих</a>
    </p>

    <div class="card" th:if="${poems == null or #lists.isEmpty(poems)}">
        <p style="margin:0;">Пока нет стихов. Нажми “Добавить стих”.</p>
    </div>

    <div class="card" th:if="${poems != null and !#lists.isEmpty(poems)}">
        <table style="width:100%; border-collapse:collapse;">
            <thead>
            <tr>
                <th style="text-align:left; padding:10px 6px; border-bottom:1px solid #ddd;">Название</th>
                <th style="text-align:left; padding:10px 6px; border-bottom:1px solid #ddd;">Статус</th>
                <th style="text-align:left; padding:10px 6px; border-bottom:1px solid #ddd;">Обновлён</th>
                <th style="text-align:right; padding:10px 6px; border-bottom:1px solid #ddd;">Действия</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="p : ${poems}">
                <td style="padding:10px 6px; border-bottom:1px solid #eee;">
                    <strong th:text="${p.title}">Название</strong>
                </td>
                <td style="padding:10px 6px; border-bottom:1px solid #eee;"
                    th:text="${p.status}">DRAFT</td>
                <td style="padding:10px 6px; border-bottom:1px solid #eee;"
                    th:text="${p.updatedAt}">...</td>
                <td style="padding:10px 6px; border-bottom:1px solid #eee; text-align:right;">
                    <a th:href="@{|/admin/poems/${p.id}/edit|}">Редактировать</a>
                    <span> · </span>
                    <form th:action="@{|/admin/poems/${p.id}/delete|}" method="post" style="display:inline;">
                        <button type="submit" onclick="return confirm('Удалить стих?')">Удалить</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</div>
</html>
