<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="layouts/admin :: layout(~{::content})">

<div th:fragment="content" class="stack">

    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
        <h1 style="margin:0;">Стихи</h1>
        <a class="btn" th:href="@{/admin/poems/new}">Добавить стих</a>
    </div>

    <div class="card" th:if="${items == null || items.isEmpty()}">
        <p style="margin:0;">Пока стихов нет.</p>
    </div>

    <div class="table" th:if="${items != null && !items.isEmpty()}">
        <div class="row head">
            <div>Название</div>
            <div>Статус</div>
            <div>Обновлён</div>
            <div></div>
        </div>

        <div class="row" th:each="p : ${items}">
            <div>
                <strong th:text="${p.title}">Название</strong>
            </div>
            <div th:text="${p.status.label}">Опубликовано</div>
            <div class="muted" th:text="${p.updatedAt}">date</div>

            <div style="display:flex; gap:10px; justify-content:flex-end; align-items:center;">
                <a th:href="@{|/admin/poems/${p.id}/edit|}">Редактировать</a>

                <form th:action="@{|/admin/poems/${p.id}/delete|}" method="post" style="margin:0;"
                      onsubmit="return confirm('Удалить стих?');">
                    <!-- CSRF -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button class="link" type="submit">Удалить</button>
                </form>
            </div>
        </div>
    </div>

</div>
</html>
